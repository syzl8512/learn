# 智慧儿童英文辅助阅读平台 - 项目需求文档

## 📋 项目概述

**项目名称**: 智慧儿童英文辅助阅读平台  
**目标用户**: 6-12岁儿童  
**核心价值**: AI驱动的儿童英文阅读难度适配平台  

## 🎯 核心功能需求

### 1. 原版阅读系统
- **书籍管理**: 展示所有可用的原版英文书籍
- **章节阅读**: 按章节组织内容，便于分段阅读
- **儿童友好界面**: 简洁高效的界面设计，适合儿童使用
- **移动端适配**: 支持PC、平板、手机等多种设备

### 2. AI智能难度适配 (核心功能)
- **内容转写**: 将原始英文内容按儿童认知水平重新表述
- **难度控制**: 按照蓝斯值或KET/PET难度进行内容转写
- **保持原意**: 简化复杂句式、替换生僻词，但保持对话、剧情、人物描写等原文特色
- **篇幅一致**: 转写后内容篇幅与原文基本一致

### 3. 智能学习辅助
- **单词翻译**: 点击单词即可查看释义（词性+中文翻译）
- **生词管理**: 点击小桃心添加到生词表
- **生词导出**: 生词表统一管理并支持导出
- **进度跟踪**: 保存阅读进度，快速返回上次位置

### 4. 后台管理系统
- **书籍上传**: 支持PDF文件上传
- **MinerU处理**: 复用现有项目中的MinerU PDF转Markdown功能
- **内容分割**: 自动按章节分割内容
- **难度评估**: 自动评估内容蓝斯值

## 🏗️ 技术架构

### 后端技术栈
- **框架**: NestJS (基于现有atomic/backend)
- **数据库**: PostgreSQL + Redis
- **AI服务**: 集成现有AI原子能力
- **文件处理**: 复用现有PDF转Markdown功能

### 前端技术栈
- **框架**: React 18 + TypeScript
- **构建工具**: Vite
- **状态管理**: Zustand
- **UI组件**: Ant Design
- **样式**: Tailwind CSS
- **路由**: React Router v6

### 基础设施
- **容器化**: Docker
- **部署**: 阿里云
- **存储**: 阿里云OSS
- **监控**: Prometheus + Grafana

## 📊 数据库设计

### 核心表结构
```sql
-- 书籍表
books (id, title, author, difficulty_level, lexile_score, created_at)

-- 章节表  
chapters (id, book_id, chapter_number, title, original_content, adapted_content)

-- 用户学习记录
study_records (id, user_id, book_id, chapter_id, progress, created_at)

-- 生词表
vocabulary (id, user_id, word, translation, added_at)

-- 书签表
bookmarks (id, user_id, chapter_id, sentence_id, created_at)
```

## 🔄 核心业务流程

### 1. 内容处理流程
```
PDF上传 → MinerU API处理 → 获取Markdown结果 → AI难度适配 → 章节分割 → 存储到数据库
```

### 2. 阅读学习流程
```
选择书籍 → 选择章节 → 阅读内容 → 点击生词翻译 → 添加生词 → 记录进度
```

### 3. AI适配流程
```
原始内容 → AI分析难度 → 简化句式 → 替换生词 → 保持原意 → 输出适配内容
```

## 🎨 界面设计要求

### 儿童友好设计
- **大字体**: 适合儿童阅读的字体大小
- **简洁布局**: 减少干扰元素
- **直观操作**: 点击即可翻译，一键添加生词
- **进度可视化**: 清晰的阅读进度显示

### 响应式设计
- **PC端**: 完整功能界面
- **平板端**: 触控友好的阅读体验
- **手机端**: 简化但完整的核心功能

## 📈 项目里程碑

### Phase 1: 基础功能 (4周)
- [ ] 实现基础书籍管理
- [ ] 集成现有MinerU PDF转Markdown功能
  - [ ] 将 `PDFToMarkdownConverter` 类集成到NestJS后端
  - [ ] 创建PDF处理服务模块
  - [ ] 实现文件上传和转换API
- [ ] 搭建基础前端框架

### Phase 2: AI适配核心 (6周)
- [ ] 开发AI难度适配算法
- [ ] 实现蓝斯值评估系统
- [ ] 完成内容转写功能
- [ ] 集成生词翻译功能

### Phase 3: 用户体验 (4周)
- [ ] 优化儿童友好界面
- [ ] 实现移动端适配
- [ ] 完善生词管理功能
- [ ] 添加进度跟踪

### Phase 4: 系统完善 (2周)
- [ ] 性能优化
- [ ] 测试完善
- [ ] 部署上线

## 🔧 技术实现要点

### MinerU PDF处理集成
- **核心文件**: 复用 `pdf_to_markdown.py` 中的 `PDFToMarkdownConverter` 类
- **API集成**: 使用现有的MinerU API调用流程
  - `get_upload_urls()` - 获取上传链接
  - `upload_files()` - 文件上传
  - `check_task_status()` - 任务状态检查
  - `download_results()` - 结果下载和文件提取
- **Web接口**: 复用 `app.py` 中的Flask接口实现
- **文件处理**: 自动解压ZIP、提取Markdown、重命名文件

### AI难度适配算法
- 使用现有AI服务原子能力
- 实现蓝斯值评估算法
- 保持原文结构和风格
- 智能词汇替换策略

### 现有能力复用
- **认证系统**: 复用atomic/backend/auth模块
- **文件管理**: 复用atomic/backend/file模块  
- **AI服务**: 复用atomic/backend/ai模块
- **PDF处理**: 集成现有项目中的MinerU PDF转Markdown实现
  - 复用 `pdf_to_markdown.py` 核心转换逻辑
  - 复用 `app.py` 中的Web接口实现
  - 复用MinerU API调用和文件处理流程
- **数据库**: 复用atomic/backend/prisma配置

## 📝 验收标准

### 功能验收
- [ ] 支持PDF上传和自动处理
- [ ] AI能够准确进行难度适配
- [ ] 生词翻译功能正常工作
- [ ] 移动端界面友好易用
- [ ] 学习进度能够正确记录

### 性能验收
- [ ] 页面加载时间 < 3秒
- [ ] AI适配处理时间 < 30秒
- [ ] 支持并发用户数 > 100
- [ ] 移动端响应式设计完善

## 🔗 MinerU集成技术方案

### 现有MinerU功能分析
- **核心类**: `PDFToMarkdownConverter` (pdf_to_markdown.py)
- **Web接口**: Flask应用 (app.py)
- **API流程**: 获取上传链接 → 上传文件 → 检查状态 → 下载结果
- **文件处理**: 自动解压、提取Markdown、重命名

### 集成到NestJS的方案
```typescript
// 1. 创建PDF处理服务
@Injectable()
export class PdfProcessingService {
  private converter: PDFToMarkdownConverter;
  
  async processPdf(file: Express.Multer.File): Promise<ProcessingResult> {
    // 复用现有MinerU逻辑
    const batchId = await this.converter.get_upload_urls([file.originalname]);
    await this.converter.upload_files([file.path], uploadUrls);
    const tasks = await this.converter.check_task_status(batchId);
    return await this.converter.download_results(tasks);
  }
}

// 2. 创建PDF控制器
@Controller('pdf')
export class PdfController {
  @Post('upload')
  async uploadPdf(@UploadedFile() file: Express.Multer.File) {
    return await this.pdfService.processPdf(file);
  }
}
```

### 文件结构规划
```
src/
├── modules/
│   ├── pdf/           # 复用现有PDF处理逻辑
│   │   ├── pdf.service.ts      # 集成PDFToMarkdownConverter
│   │   ├── pdf.controller.ts   # 文件上传API
│   │   └── pdf.module.ts
│   ├── books/         # 新增书籍管理
│   └── ai/            # 复用现有AI服务
```

## 🚀 下一步行动

1. **确认需求**: 与您确认以上需求是否准确
2. **技术选型**: 确定具体的技术实现方案
3. **项目启动**: 开始Phase 1的开发工作
4. **定期沟通**: 每周同步进度和调整需求

---

**文档版本**: v1.0  
**创建时间**: 2025年10月23日  
**最后更新**: 2025年10月23日
