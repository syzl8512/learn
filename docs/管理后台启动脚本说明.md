# 管理后台启动脚本使用说明

## 概述

`start-admin.sh` 是一个用于快速启动 React 管理后台开发服务器的自动化脚本，包含完整的环境检查和依赖管理功能。

## 基本用法

```bash
# 启动管理后台
./start-admin.sh

# 显示帮助信息
./start-admin.sh --help
./start-admin.sh -h

# 启动前清理缓存
./start-admin.sh --clean
./start-admin.sh -c
```

## 功能特性

### ✅ 环境检查
- **Node.js 版本检查**: 确保使用 Node.js 18 或更高版本
- **包管理器检查**: 优先使用 npm（项目标准）
- **依赖检查**: 自动检测并安装缺失的依赖
- **端口检查**: 检查 3001 端口是否被占用
- **后端服务检查**: 检查后端 API 服务状态

### ✅ 缓存管理
- **Vite 缓存清理**: 清理 `node_modules/.vite` 目录
- **构建文件清理**: 清理 `dist` 目录
- **按需清理**: 通过 `--clean` 参数控制

### ✅ 服务状态显示
- **后端服务状态**: 显示后端 API 是否可访问
- **访问地址**: 提供完整的访问链接
- **API 文档链接**: 直接访问 Swagger 文档
- **管理员账号提示**: 显示默认登录信息

## 启动流程

1. **环境检查** → 2. **依赖安装** → 3. **端口检查** → 4. **后端检查** → 5. **启动服务**

## 输出示例

```
========================================
  管理后台启动脚本
========================================

ℹ 检查 Node.js 版本...
✓ Node.js 版本: v22.19.0
ℹ 检查包管理器...
✓ npm 版本: v10.9.3
ℹ 检查依赖是否安装...
✓ 依赖已安装
ℹ 检查后端服务状态...
✓ 后端服务正在运行 (http://localhost:3000)

========================================
  启动成功！
========================================

访问地址:
  - 管理后台: http://localhost:3001
  - 后端 API: http://localhost:3000/api
  - API 文档: http://localhost:3000/api-docs

✅ 后端服务状态: 正常

提示:
  - 按 Ctrl+C 停止服务
  - 修改代码后会自动热重载
  - 管理员账号: admin / admin123 (默认)
```

## 故障排除

### 端口被占用
```
⚠ 管理后台 端口 3001 已被占用
ℹ 请检查是否有其他服务在使用该端口
```
**解决方案**: 停止占用端口的服务或选择继续启动

### 后端服务未运行
```
⚠ 后端服务未运行或不可访问
ℹ 建议先启动后端服务: cd backend && npm run start:dev
```
**解决方案**: 在另一个终端窗口启动后端服务

### 依赖安装失败
```
✗ 依赖安装失败
ℹ 请尝试手动在 admin-dashboard 目录下运行: npm install
```
**解决方案**: 手动执行命令或检查网络连接

## 项目结构

```
project-root/
├── admin-dashboard/          # React 管理后台
│   ├── src/
│   ├── package.json
│   └── node_modules/
├── backend/                  # NestJS 后端
├── start-admin.sh           # 启动脚本
└── ...
```

## 技术栈

- **前端**: React 18 + TypeScript + Vite + Ant Design
- **包管理**: npm (项目标准)
- **开发服务器**: Vite dev server (http://localhost:3001)

## 相关文件

- `admin-dashboard/package.json` - 前端依赖配置
- `backend/package.json` - 后端依赖配置
- `CLAUDE.md` - 项目架构和开发指南
- `快速启动指南.md` - 整体项目启动说明

---

**注意**: 此脚本专为智慧儿童英文阅读平台的管理后台设计，确保在项目根目录下执行。