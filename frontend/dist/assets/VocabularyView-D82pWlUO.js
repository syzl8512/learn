import{d as ee,j as D,k as E,l as te,c as $,a as o,b as e,w as a,r as i,m as W,x as ae,y as le,E as f,o as w,e as h,q as oe,t as u,z as se,A as ne,B as F,s as ie,i as v,C as de,D as re}from"./index-Q6BRD8Zg.js";import{a as b}from"./api-DwdFy2Bd.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Dh5gYvL4.js";const M={async getVocabularies(r){return b.get("/vocabularies",{params:r})},async addVocabulary(r){return b.post("/vocabularies",r)},async updateVocabulary(r,y){return b.put(`/vocabularies/${r}`,y)},async deleteVocabulary(r){return b.delete(`/vocabularies/${r}`)},async markAsMastered(r){return b.put(`/vocabularies/${r}/master`)},async getStatistics(){return b.get("/vocabularies/statistics")},async importVocabularies(r){return b.post("/vocabularies/import",{words:r})}},ce={class:"vocabulary-page"},pe={class:"page-content"},me={class:"container"},_e={class:"stats-section"},fe={class:"stat-card total"},ve={class:"stat-icon"},be={class:"stat-info"},ye={class:"stat-number"},ge={class:"stat-card mastered"},Ve={class:"stat-icon"},we={class:"stat-info"},he={class:"stat-number"},xe={class:"stat-card learning"},Ce={class:"stat-icon"},ke={class:"stat-info"},ze={class:"stat-number"},Ue={class:"stat-card new"},Be={class:"stat-icon"},De={class:"stat-info"},$e={class:"stat-number"},Me={class:"action-section"},Se={class:"vocabulary-list"},je={class:"word-cell"},Te={key:0,class:"pronunciation"},Ee={key:0,class:"example"},Ne={key:1,class:"no-example"},qe={class:"review-count"},Ae={class:"pagination-section"},We=ee({__name:"VocabularyView",setup(r){const y=D(!1),S=D([]),x=D({total:0,mastered:0,learning:0,new:0}),c=E({search:"",category:"",difficulty:""}),p=E({page:1,limit:20,total:0}),C=D(!1),n=E({word:"",definition:"",pronunciation:"",example:"",category:"",difficulty:"medium"}),k=async()=>{try{y.value=!0;const s={page:p.page,limit:p.limit,category:c.category||void 0,difficulty:c.difficulty||void 0,search:c.search||void 0},t=await M.getVocabularies(s);S.value=t.vocabularies,p.total=t.total}catch(s){console.error("获取生词列表失败:",s),f.error("获取生词列表失败")}finally{y.value=!1}},j=async()=>{try{const s=await M.getStatistics();x.value=s}catch(s){console.error("获取统计信息失败:",s)}},T=()=>{p.page=1,k()},N=()=>{k()},P=()=>{Object.assign(n,{word:"",definition:"",pronunciation:"",example:"",category:"",difficulty:"medium"}),C.value=!0},I=async()=>{try{if(!n.word||!n.definition){f.warning("请填写单词和释义");return}await M.addVocabulary(n),f.success("添加生词成功"),C.value=!1,k(),j()}catch(s){console.error("添加生词失败:",s),f.error("添加生词失败")}},O=s=>{f.info(`复习单词: ${s.word}`)},G=async s=>{try{await re.confirm(`确定要删除单词 "${s.word}" 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await M.deleteVocabulary(s.id),f.success("删除成功"),k(),j()}catch(t){t!=="cancel"&&(console.error("删除生词失败:",t),f.error("删除生词失败"))}},H=s=>{switch(s){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"info"}},J=s=>{switch(s){case"easy":return"简单";case"medium":return"中等";case"hard":return"困难";default:return"未知"}};return te(()=>{k(),j()}),(s,t)=>{const g=i("el-icon"),m=i("el-col"),q=i("el-row"),z=i("el-input"),d=i("el-option"),B=i("el-select"),U=i("el-button"),K=i("el-empty"),_=i("el-table-column"),A=i("el-tag"),L=i("el-table"),Q=i("el-pagination"),V=i("el-form-item"),R=i("el-form"),X=i("el-dialog"),Y=le("loading");return w(),$("div",ce,[t[22]||(t[22]=o("div",{class:"page-header"},[o("div",{class:"container"},[o("h1",{class:"page-title"},"生词管理"),o("p",{class:"page-subtitle"},"智能生词本，高效记忆和复习")])],-1)),o("div",pe,[o("div",me,[o("div",_e,[e(q,{gutter:16},{default:a(()=>[e(m,{xs:12,sm:6},{default:a(()=>[o("div",fe,[o("div",ve,[e(g,{size:"24"},{default:a(()=>[e(h(oe))]),_:1})]),o("div",be,[o("div",ye,u(x.value.total),1),t[13]||(t[13]=o("div",{class:"stat-label"},"总生词",-1))])])]),_:1}),e(m,{xs:12,sm:6},{default:a(()=>[o("div",ge,[o("div",Ve,[e(g,{size:"24"},{default:a(()=>[e(h(se))]),_:1})]),o("div",we,[o("div",he,u(x.value.mastered),1),t[14]||(t[14]=o("div",{class:"stat-label"},"已掌握",-1))])])]),_:1}),e(m,{xs:12,sm:6},{default:a(()=>[o("div",xe,[o("div",Ce,[e(g,{size:"24"},{default:a(()=>[e(h(ne))]),_:1})]),o("div",ke,[o("div",ze,u(x.value.learning),1),t[15]||(t[15]=o("div",{class:"stat-label"},"学习中",-1))])])]),_:1}),e(m,{xs:12,sm:6},{default:a(()=>[o("div",Ue,[o("div",Be,[e(g,{size:"24"},{default:a(()=>[e(h(F))]),_:1})]),o("div",De,[o("div",$e,u(x.value.new),1),t[16]||(t[16]=o("div",{class:"stat-label"},"新生词",-1))])])]),_:1})]),_:1})]),o("div",Me,[e(q,{gutter:16,class:"action-row"},{default:a(()=>[e(m,{xs:24,sm:8},{default:a(()=>[e(z,{modelValue:c.search,"onUpdate:modelValue":t[0]||(t[0]=l=>c.search=l),placeholder:"搜索生词",clearable:"",onChange:T},{prefix:a(()=>[e(g,null,{default:a(()=>[e(h(ie))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,{xs:24,sm:6},{default:a(()=>[e(B,{modelValue:c.category,"onUpdate:modelValue":t[1]||(t[1]=l=>c.category=l),placeholder:"选择分类",clearable:"",onChange:T},{default:a(()=>[e(d,{label:"名词",value:"noun"}),e(d,{label:"动词",value:"verb"}),e(d,{label:"形容词",value:"adjective"}),e(d,{label:"副词",value:"adverb"})]),_:1},8,["modelValue"])]),_:1}),e(m,{xs:24,sm:6},{default:a(()=>[e(B,{modelValue:c.difficulty,"onUpdate:modelValue":t[2]||(t[2]=l=>c.difficulty=l),placeholder:"选择难度",clearable:"",onChange:T},{default:a(()=>[e(d,{label:"简单",value:"easy"}),e(d,{label:"中等",value:"medium"}),e(d,{label:"困难",value:"hard"})]),_:1},8,["modelValue"])]),_:1}),e(m,{xs:24,sm:4},{default:a(()=>[e(U,{type:"primary",onClick:P},{default:a(()=>[e(g,null,{default:a(()=>[e(h(F))]),_:1}),t[17]||(t[17]=v(" 添加生词 ",-1))]),_:1})]),_:1})]),_:1})]),o("div",Se,[!y.value&&S.value.length===0?(w(),W(K,{key:0,description:"暂无生词"})):ae((w(),W(L,{key:1,data:S.value,stripe:""},{default:a(()=>[e(_,{prop:"word",label:"单词","min-width":"120"},{default:a(({row:l})=>[o("div",je,[o("strong",null,u(l.word),1),l.pronunciation?(w(),$("span",Te," ["+u(l.pronunciation)+"] ",1)):de("",!0)])]),_:1}),e(_,{prop:"definition",label:"释义","min-width":"200"}),e(_,{prop:"example",label:"例句","min-width":"250"},{default:a(({row:l})=>[l.example?(w(),$("span",Ee,u(l.example),1)):(w(),$("span",Ne,"暂无例句"))]),_:1}),e(_,{prop:"difficulty",label:"难度",width:"80"},{default:a(({row:l})=>[e(A,{type:H(l.difficulty),size:"small"},{default:a(()=>[v(u(J(l.difficulty)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"isMastered",label:"掌握状态",width:"100"},{default:a(({row:l})=>[e(A,{type:l.isMastered?"success":"warning",size:"small"},{default:a(()=>[v(u(l.isMastered?"已掌握":"学习中"),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"reviewCount",label:"复习次数",width:"100",align:"center"},{default:a(({row:l})=>[o("span",qe,u(l.reviewCount),1)]),_:1}),e(_,{label:"操作",width:"150",fixed:"right"},{default:a(({row:l})=>[e(U,{type:"primary",size:"small",onClick:Z=>O(l)},{default:a(()=>[...t[18]||(t[18]=[v(" 复习 ",-1)])]),_:1},8,["onClick"]),e(U,{type:"danger",size:"small",onClick:Z=>G(l)},{default:a(()=>[...t[19]||(t[19]=[v(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Y,y.value]])]),o("div",Ae,[e(Q,{"current-page":p.page,"onUpdate:currentPage":t[3]||(t[3]=l=>p.page=l),"page-size":p.limit,"onUpdate:pageSize":t[4]||(t[4]=l=>p.limit=l),total:p.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:N,onCurrentChange:N},null,8,["current-page","page-size","total"])])])]),e(X,{modelValue:C.value,"onUpdate:modelValue":t[12]||(t[12]=l=>C.value=l),title:"添加生词",width:"500px"},{footer:a(()=>[e(U,{onClick:t[11]||(t[11]=l=>C.value=!1)},{default:a(()=>[...t[20]||(t[20]=[v("取消",-1)])]),_:1}),e(U,{type:"primary",onClick:I},{default:a(()=>[...t[21]||(t[21]=[v("确定",-1)])]),_:1})]),default:a(()=>[e(R,{model:n,"label-width":"80px"},{default:a(()=>[e(V,{label:"单词",required:""},{default:a(()=>[e(z,{modelValue:n.word,"onUpdate:modelValue":t[5]||(t[5]=l=>n.word=l),placeholder:"请输入单词"},null,8,["modelValue"])]),_:1}),e(V,{label:"释义",required:""},{default:a(()=>[e(z,{modelValue:n.definition,"onUpdate:modelValue":t[6]||(t[6]=l=>n.definition=l),type:"textarea",placeholder:"请输入单词释义",rows:2},null,8,["modelValue"])]),_:1}),e(V,{label:"发音"},{default:a(()=>[e(z,{modelValue:n.pronunciation,"onUpdate:modelValue":t[7]||(t[7]=l=>n.pronunciation=l),placeholder:"请输入音标"},null,8,["modelValue"])]),_:1}),e(V,{label:"例句"},{default:a(()=>[e(z,{modelValue:n.example,"onUpdate:modelValue":t[8]||(t[8]=l=>n.example=l),type:"textarea",placeholder:"请输入例句",rows:3},null,8,["modelValue"])]),_:1}),e(V,{label:"分类"},{default:a(()=>[e(B,{modelValue:n.category,"onUpdate:modelValue":t[9]||(t[9]=l=>n.category=l),placeholder:"选择分类"},{default:a(()=>[e(d,{label:"名词",value:"noun"}),e(d,{label:"动词",value:"verb"}),e(d,{label:"形容词",value:"adjective"}),e(d,{label:"副词",value:"adverb"})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"难度"},{default:a(()=>[e(B,{modelValue:n.difficulty,"onUpdate:modelValue":t[10]||(t[10]=l=>n.difficulty=l),placeholder:"选择难度"},{default:a(()=>[e(d,{label:"简单",value:"easy"}),e(d,{label:"中等",value:"medium"}),e(d,{label:"困难",value:"hard"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Ge=ue(We,[["__scopeId","data-v-e0c6cbb1"]]);export{Ge as default};
