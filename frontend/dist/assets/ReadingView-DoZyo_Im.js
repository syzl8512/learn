import{d as N,j as L,k as $,l as T,c as h,a,b as e,w as l,r as i,m as b,E as R,o as g,e as C,s as j,F as M,p as q,f as I,t as m,i as x,q as A}from"./index-Q6BRD8Zg.js";import{a as u}from"./api-DwdFy2Bd.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Dh5gYvL4.js";const H={async getBooks(s){return u.get("/books",{params:s})},async getBook(s){return u.get(`/books/${s}`)},async getChapters(s){return u.get(`/books/${s}/chapters`)},async getChapterContent(s){return u.get(`/chapters/${s}/content`)},async updateProgress(s,p,_){return u.post("/reading-progress",{bookId:s,chapterId:p,progress:_})},async getProgress(s){return u.get(`/reading-progress/${s}`)},async addBookmark(s,p,_,n){return u.post("/bookmarks",{bookId:s,chapterId:p,position:_,note:n})},async getBookmarks(s){return u.get("/bookmarks",{params:{bookId:s}})}},J={class:"reading-page"},K={class:"page-content"},O={class:"container"},Q={class:"filter-section"},W={class:"book-list"},X=["onClick"],Y={class:"book-cover"},Z=["src","alt"],ee={key:1,class:"cover-placeholder"},te={class:"book-info"},ae={class:"book-title"},se={class:"book-author"},oe={class:"book-description"},le={class:"book-meta"},ne={class:"book-stats"},re={class:"stat-item"},ce={class:"pagination-section"},ie=N({__name:"ReadingView",setup(s){const p=L(!1),_=L([]),n=$({category:"",lexileRange:"",search:""}),c=$({page:1,limit:16,total:0}),v=async()=>{try{p.value=!0;const r={page:c.page,limit:c.limit,category:n.category||void 0,search:n.search||void 0},o=await H.getBooks(r);_.value=o.books,c.total=o.total}catch(r){console.error("获取书籍列表失败:",r),R.error("获取书籍列表失败")}finally{p.value=!1}},y=()=>{c.page=1,v()},V=()=>{v()},U=r=>{R.info(`打开书籍: ${r.title}`)},P=r=>{switch(r){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"info"}},S=r=>{switch(r){case"easy":return"简单";case"medium":return"中等";case"hard":return"困难";default:return"未知"}};return T(()=>{v()}),(r,o)=>{const d=i("el-option"),B=i("el-select"),f=i("el-col"),k=i("el-icon"),D=i("el-input"),w=i("el-row"),E=i("el-empty"),z=i("el-tag"),F=i("el-pagination");return g(),h("div",J,[o[5]||(o[5]=a("div",{class:"page-header"},[a("div",{class:"container"},[a("h1",{class:"page-title"},"分级阅读"),a("p",{class:"page-subtitle"},"根据难度等级精选英文原版书籍，循序渐进提升阅读能力")])],-1)),a("div",K,[a("div",O,[a("div",Q,[e(w,{gutter:16},{default:l(()=>[e(f,{xs:24,sm:8,md:6},{default:l(()=>[e(B,{modelValue:n.category,"onUpdate:modelValue":o[0]||(o[0]=t=>n.category=t),placeholder:"选择分类",clearable:"",onChange:y},{default:l(()=>[e(d,{label:"童话故事",value:"fairy-tale"}),e(d,{label:"科普读物",value:"science"}),e(d,{label:"历史故事",value:"history"}),e(d,{label:"冒险故事",value:"adventure"})]),_:1},8,["modelValue"])]),_:1}),e(f,{xs:24,sm:8,md:6},{default:l(()=>[e(B,{modelValue:n.lexileRange,"onUpdate:modelValue":o[1]||(o[1]=t=>n.lexileRange=t),placeholder:"蓝斯值范围",clearable:"",onChange:y},{default:l(()=>[e(d,{label:"0-200L (入门)",value:"0-200"}),e(d,{label:"200-400L (初级)",value:"200-400"}),e(d,{label:"400-600L (中级)",value:"400-600"}),e(d,{label:"600L+ (高级)",value:"600+"})]),_:1},8,["modelValue"])]),_:1}),e(f,{xs:24,sm:8,md:6},{default:l(()=>[e(D,{modelValue:n.search,"onUpdate:modelValue":o[2]||(o[2]=t=>n.search=t),placeholder:"搜索书籍",clearable:"",onChange:y},{prefix:l(()=>[e(k,null,{default:l(()=>[e(C(j))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),a("div",W,[!p.value&&_.value.length===0?(g(),b(E,{key:0,description:"暂无书籍"})):(g(),b(w,{key:1,gutter:24},{default:l(()=>[(g(!0),h(M,null,q(_.value,t=>(g(),b(f,{key:t.id,xs:24,sm:12,md:8,lg:6},{default:l(()=>[a("div",{class:"book-card",onClick:de=>U(t)},[a("div",Y,[t.cover?(g(),h("img",{key:0,src:t.cover,alt:t.title,class:"cover-image"},null,8,Z)):(g(),h("div",ee,[e(k,{size:"48"},{default:l(()=>[e(C(I))]),_:1})]))]),a("div",te,[a("h3",ae,m(t.title),1),a("p",se,m(t.author),1),a("p",oe,m(t.description),1),a("div",le,[e(z,{type:"primary",size:"small"},{default:l(()=>[x(m(t.lexileLevel)+"L ",1)]),_:2},1024),e(z,{type:P(t.difficulty),size:"small"},{default:l(()=>[x(m(S(t.difficulty)),1)]),_:2},1032,["type"])]),a("div",ne,[a("span",re,[e(k,null,{default:l(()=>[e(C(A))]),_:1}),x(" "+m(t.totalChapters)+" 章节 ",1)])])])],8,X)]),_:2},1024))),128))]),_:1}))]),a("div",ce,[e(F,{"current-page":c.page,"onUpdate:currentPage":o[3]||(o[3]=t=>c.page=t),"page-size":c.limit,"onUpdate:pageSize":o[4]||(o[4]=t=>c.limit=t),total:c.total,"page-sizes":[8,16,32],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:V,onCurrentChange:V},null,8,["current-page","page-size","total"])])])])])}}}),me=G(ie,[["__scopeId","data-v-4cc54f84"]]);export{me as default};
