import{d as j,j as L,k,l as H,c as S,a as s,b as e,w as o,r as c,m as h,E as z,o as p,e as U,s as P,F as I,p as q,v as A,t as _,i as $}from"./index-Q6BRD8Zg.js";import{a as m}from"./api-DwdFy2Bd.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Dh5gYvL4.js";const J={async getListeningContents(d){return m.get("/listening",{params:d})},async getListeningContent(d){return m.get(`/listening/${d}`)},async recordListeningHistory(d,u,g){return m.post("/listening/history",{contentId:d,duration:u,completed:g})},async getListeningHistory(d){return m.get("/listening/history",{params:d})},async getListeningStatistics(){return m.get("/listening/statistics")}},K={class:"listening-page"},O={class:"page-content"},Q={class:"container"},R={class:"filter-section"},W={class:"content-list"},X=["onClick"],Y={class:"card-cover"},Z={class:"play-button"},ee={class:"duration"},te={class:"card-body"},ne={class:"content-title"},se={class:"content-description"},ae={class:"content-meta"},oe={class:"pagination-section"},le=j({__name:"ListeningView",setup(d){const u=L(!1),g=L([]),l=k({category:"",difficulty:"",search:""}),i=k({page:1,limit:12,total:0}),y=async()=>{try{u.value=!0;const a={page:i.page,limit:i.limit,category:l.category||void 0,difficulty:l.difficulty||void 0,search:l.search||void 0},n=await J.getListeningContents(a);g.value=n.contents,i.total=n.total}catch(a){console.error("获取听力内容失败:",a),z.error("获取听力内容失败")}finally{u.value=!1}},v=()=>{i.page=1,y()},C=()=>{y()},B=a=>{z.info(`播放: ${a.title}`)},D=a=>{const n=Math.floor(a/60),r=a%60;return`${n}:${r.toString().padStart(2,"0")}`},E=a=>{switch(a){case"easy":return"success";case"medium":return"warning";case"hard":return"danger";default:return"info"}},F=a=>{switch(a){case"easy":return"简单";case"medium":return"中等";case"hard":return"困难";default:return"未知"}};return H(()=>{y()}),(a,n)=>{const r=c("el-option"),b=c("el-select"),f=c("el-col"),V=c("el-icon"),M=c("el-input"),x=c("el-row"),N=c("el-empty"),w=c("el-tag"),T=c("el-pagination");return p(),S("div",K,[n[5]||(n[5]=s("div",{class:"page-header"},[s("div",{class:"container"},[s("h1",{class:"page-title"},"听力训练"),s("p",{class:"page-subtitle"},"丰富的听力资源，提升英语听力理解能力")])],-1)),s("div",O,[s("div",Q,[s("div",R,[e(x,{gutter:16},{default:o(()=>[e(f,{xs:24,sm:8,md:6},{default:o(()=>[e(b,{modelValue:l.category,"onUpdate:modelValue":n[0]||(n[0]=t=>l.category=t),placeholder:"选择分类",clearable:"",onChange:v},{default:o(()=>[e(r,{label:"故事",value:"story"}),e(r,{label:"对话",value:"dialogue"}),e(r,{label:"新闻",value:"news"}),e(r,{label:"歌曲",value:"song"})]),_:1},8,["modelValue"])]),_:1}),e(f,{xs:24,sm:8,md:6},{default:o(()=>[e(b,{modelValue:l.difficulty,"onUpdate:modelValue":n[1]||(n[1]=t=>l.difficulty=t),placeholder:"选择难度",clearable:"",onChange:v},{default:o(()=>[e(r,{label:"简单",value:"easy"}),e(r,{label:"中等",value:"medium"}),e(r,{label:"困难",value:"hard"})]),_:1},8,["modelValue"])]),_:1}),e(f,{xs:24,sm:8,md:6},{default:o(()=>[e(M,{modelValue:l.search,"onUpdate:modelValue":n[2]||(n[2]=t=>l.search=t),placeholder:"搜索内容",clearable:"",onChange:v},{prefix:o(()=>[e(V,null,{default:o(()=>[e(U(P))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),s("div",W,[!u.value&&g.value.length===0?(p(),h(N,{key:0,description:"暂无听力内容"})):(p(),h(x,{key:1,gutter:24},{default:o(()=>[(p(!0),S(I,null,q(g.value,t=>(p(),h(f,{key:t.id,xs:24,sm:12,md:8,lg:6},{default:o(()=>[s("div",{class:"content-card",onClick:ie=>B(t)},[s("div",Y,[s("div",Z,[e(V,{size:"32"},{default:o(()=>[e(U(A))]),_:1})]),s("div",ee,_(D(t.duration)),1)]),s("div",te,[s("h3",ne,_(t.title),1),s("p",se,_(t.description),1),s("div",ae,[e(w,{type:E(t.difficulty)},{default:o(()=>[$(_(F(t.difficulty)),1)]),_:2},1032,["type"]),e(w,{type:"info"},{default:o(()=>[$(_(t.category),1)]),_:2},1024)])])],8,X)]),_:2},1024))),128))]),_:1}))]),s("div",oe,[e(T,{"current-page":i.page,"onUpdate:currentPage":n[3]||(n[3]=t=>i.page=t),"page-size":i.limit,"onUpdate:pageSize":n[4]||(n[4]=t=>i.limit=t),total:i.total,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:C,onCurrentChange:C},null,8,["current-page","page-size","total"])])])])])}}}),ge=G(le,[["__scopeId","data-v-1d367e0e"]]);export{ge as default};
