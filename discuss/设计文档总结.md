# 详细项目设计文档 - 一页总结

**生成日期**: 2025-10-25
**整合来源**: 项目需求 + aidarrett 分析 + UI 设计截图

---

## 📊 文档结构

```
详细项目设计文档.md (3000+ 行)
├─ 执行摘要               - 项目目标和定位
├─ 用户需求分析          - 学生/教师/管理员需求
├─ 产品功能架构          - 5 大模块详解
├─ AI 能力详解            - 蓝斯值评估/内容转写/话题生成
├─ 交互设计方案          - 参考 aidarrett + UI 截图优化
├─ 后台管理系统          - 5 大功能模块
├─ 技术实现方案          - 完整的架构和 API 设计
├─ 数据库设计            - Prisma Schema + 10 张表
├─ 开发路线图            - 5 个 Phase 16 周计划
└─ 验收标准              - 功能/性能/安全/体验
```

---

## 🎯 核心创新点

### 1. AI 难度适配 ⭐⭐⭐
- **蓝斯值评估**: AI 自动评估文本难度
- **多版本生成**: 简易版 (600-800L) → 基础版 (800-1000L) → 标准版 (1000-1200L)
- **智能转写**: 保持故事情节，简化难词和句式
- **人工审核**: 关键内容人工检查，确保质量

### 2. AI 话题分类与生成 ⭐⭐⭐
**6 大话题体系**（来自 aidarrett）:
- 日常生活 (Daily Life)
- 科技创新 (Global Tech)
- 历史文化 (History & Arts)
- 自然科学 (Science & Nature)
- 社会文化 (Society & Culture)
- 哲学思辨 (Philosophy)

**自动化流程**:
```
书籍内容 → AI 提取主题 → 生成相关听力题目 → 生成关键词汇
```

### 3. 沉浸式听力训练 ⭐⭐⭐
参考 aidarrett 的 5 大交互特色：
- **分类浏览** - 6 大话题 + 5 个难度等级
- **专注模式** - 逐句显示，隐藏英文/中文进行训练
- **语速控制** - 0.75x / 1.0x / 1.25x / 1.5x
- **字幕同步** - 音频与文本实时同步
- **TTS 语音合成** - Google Cloud / Azure Speech

### 4. 完整的学习生态 ⭐⭐⭐
- **点击查词** - 点击任意单词查释义
- **生词本管理** - 分类、复习、导出 (CSV/Anki)
- **进度追踪** - 自动保存位置，学习数据统计
- **成就系统** - 徽章、等级、成就解锁（未来）

---

## 📁 5 大功能模块

### 模块 1️⃣: 阅读模块 (Reading)
```
书籍列表 → 章节选择 → 双版本阅读 → 点击查词 → 进度保存
                    ↓
                  原文 (原始英文)
                  适配版 (AI 难度适配)
                  音频朗读 (TTS + 语速调节)
```

**核心交互**:
- 原文/适配版一键切换
- 点击单词弹窗查词
- ❤ 心形快速收藏生词
- 🔖 书签功能定位位置
- ▶ 朗读（支持 0.75x-1.5x）

### 模块 2️⃣: 听力训练模块 (Listening)
```
话题分类 → 难度选择 → 音频播放 → 专注模式 → 进度记录
  (6类)      (5级)      (TTS)     (逐句训练)
```

**内容类型**:
- 对话型 (Dialogue)
- 讲述型 (Narrative)
- 讨论型 (Discussion)
- 采访型 (Interview)

**难度分级**:
- Easy (600-900L)
- Medium (900-1100L)
- Hard (1100-1300L)
- Advanced (1300-1500L)
- Expert (1500L+)

### 模块 3️⃣: 词汇学习模块 (Vocabulary)
```
点击查词 → 弹窗显示 → 添加生词 → 生词本管理 → 复习和导出
  (任意单词)  (英中/例句)  (❤快速添加) (分类、复习、导出)
```

**词义展示**:
- 音标、词性、英文释义
- 中文翻译、例句、同义词
- 来自牛津/朗文词典

### 模块 4️⃣: 学习进度与个人中心
```
学习仪表板 → 进度统计 → 成就系统 → 学习热力图
  (统计卡片)    (日/周/月)   (徽章解锁)   (GitHub风格)
```

**数据追踪**:
- 总学习时长、本周学习时长
- 已读书籍数、完成进度
- 掌握单词数、新增单词数
- 完成听力数、学习热度

### 模块 5️⃣: 后台管理系统 (Admin)
```
5 大功能模块
├─ 📚 书籍和章节管理 (CRUD + 审核)
├─ 🎵 听力内容管理 (创建/编辑/发布)
├─ 👥 用户和班级管理 (学生/班级/监督)
├─ 📊 学习数据统计 (报告/导出)
└─ ⚙️  系统配置 (API Key/权限/通知)
```

---

## 🤖 AI 能力核心流程

### AI 蓝斯值评估
```python
原文 → LLM 分析词汇/句式/语法 → 评估蓝斯值 → 验证 (反复优化)
↓
"The old man walked slowly" → 850L (中级)
```

### AI 内容转写
```python
原文 + 目标蓝斯值 (700L) 
  → LLM 转写 (保持情节，简化难度)
  → 验证蓝斯值
  → 如果偏差大，递归优化
  → 适配版输出
```

### AI 话题分类和生成
```
书籍内容 → AI 提取主题
  ├─ 话题 1: 自然科学
  │  └─ 生成听力题目: "生态系统是什么"
  ├─ 话题 2: 科技创新
  │  └─ 生成听力题目: "太阳能如何工作"
  └─ 关键词汇: [ecosystem, renewable, ...]
```

---

## 🎨 交互设计原则

### 1. 参考 aidarrett 的核心成功因素
✅ 分类丰富 - 6 大话题系统性组织内容
✅ 难度分级 - 5 个等级精细化体验
✅ 专注模式 - 逐句显示、文本隐藏、高集中度
✅ 语速控制 - 4 档语速适应不同水平
✅ 点击查词 - 任意单词即时查释义

### 2. 融合项目需求的核心能力
✅ AI 难度适配 - 原版书籍 → 多个适配版本
✅ 学习进度追踪 - 自动保存、快速返回
✅ 生词本管理 - 分类、复习、导出
✅ 儿童友好 - 界面简洁、操作直观

### 3. 微信小程序优化
✅ 底部标签栏 - 快速导航 (书籍/听力/生词本/我的)
✅ 触控优化 - 长按查词、滑动翻页
✅ 性能优化 - 分页加载、离线缓存
✅ 包体积控制 - < 2MB 主包限制

---

## 📱 产品亮点总结

| 功能 | 创意点 | 竞争优势 |
|------|--------|---------|
| **AI 难度适配** | 一本书生成多个版本 | 精准适配每个学生水平 |
| **话题分类** | 自动提取 + AI 生成 | 内容系统化、可复用 |
| **专注模式** | 逐句训练 + 隐藏文本 | 提高学习集中度 |
| **点击查词** | 即时弹窗 + 多个词典 | 学习流畅度高 |
| **生词管理** | 自动分类 + Anki 导出 | 支持多种复习方式 |
| **进度追踪** | 自动保存 + 学习统计 | 清晰的学习反馈 |

---

## 🛠️ 技术方案

### 前端
- **框架**: Taro 4.x + React 19 + TypeScript
- **微信小程序**: 一套代码编译多平台
- **状态管理**: Zustand
- **样式**: NativeWind / CSS Modules

### 后端
- **框架**: NestJS 10.x
- **数据库**: PostgreSQL 16 + Redis
- **ORM**: Prisma
- **认证**: JWT + 微信登录

### AI 服务
- **内容生成**: OpenAI GPT-4 / Claude 3
- **语音合成**: Google Cloud TTS / Azure Speech
- **词义查询**: 牛津 / 朗文词典 API

### 基础设施
- **部署**: 阿里云 ECS + RDS
- **容器化**: Docker + Docker Compose
- **CDN**: 阿里云 CDN
- **监控**: Prometheus + Grafana

---

## 📊 数据库设计

### 10 张核心数据表
```
User (用户)
├─ Book (书籍)
│  └─ Chapter (章节，4个版本内容)
│     ├─ ExtractedTopic (提取的话题)
│     ├─ StudyRecord (学习进度)
│     └─ Bookmark (书签)
├─ ListeningContent (听力内容)
│  └─ ListeningHistory (听力历史)
├─ Vocabulary (生词本)
└─ AIConfig (AI 配置)
```

**关键字段**:
- Chapter: originalContent, adaptedEasyContent, adaptedBasicContent, adaptedStandardContent
- ListeningContent: transcript, subtitles, translation, audioUrl
- Vocabulary: word, meaning, pronunciation, examples, mastered

---

## 📅 开发计划 (16 周)

| Phase | 时间 | 功能 | 状态 |
|-------|------|------|------|
| **Phase 1** | 4周 | 后端框架、前端框架、认证 | ⏳ |
| **Phase 2** | 6周 | 阅读模块、AI 适配、词汇学习 | ⏳ |
| **Phase 3** | 4周 | 听力模块、AI 话题生成 | ⏳ |
| **Phase 4** | 3周 | 后台管理系统 | ⏳ |
| **Phase 5** | 2周 | 优化、测试、部署 | ⏳ |

---

## ✅ 验收标准 (快速清单)

### 功能验收
- [ ] 用户能正常登录和浏览书籍
- [ ] 原文/适配版正确显示和切换
- [ ] 点击单词能查询释义并保存到生词本
- [ ] 音频朗读支持 4 档语速调节
- [ ] 听力内容按 6 大话题 + 5 个难度分类
- [ ] 专注模式逐句训练，支持隐藏文本
- [ ] 进度自动保存和恢复
- [ ] 后台管理能审核 AI 内容

### 性能验收
- [ ] 页面加载 < 2 秒（4G）
- [ ] 书籍列表滚动流畅（60fps）
- [ ] AI 适配 < 30 秒
- [ ] 小程序包体积 < 2MB

### 用户体验
- [ ] 界面设计儿童友好
- [ ] 操作流程直观易懂
- [ ] 错误提示清晰有效

---

## 🎉 总体评价

### 相比项目需求的增强
✅ **AI 能力升级**: 不仅做难度适配，还做话题生成和内容创建
✅ **交互体验优化**: 参考 aidarrett 成功模式，专注模式、语速控制等
✅ **功能完整性**: 从书籍阅读 → 听力训练 → 词汇学习，三维一体
✅ **后台能力**: 完整的管理系统，支持内容审核和数据分析

### 相比 aidarrett 的创新
✅ **原版书籍处理**: 自动难度适配，生成多个版本
✅ **深度学习追踪**: 蓝斯值科学分级，学习数据统计
✅ **AI 驱动内容**: 话题自动分类，听力内容生成
✅ **儿童和教师双重关注**: 既优化学生体验，也提供教师管理工具

---

**文档规模**: 3000+ 行
**文档深度**: 包含完整的功能设计、技术架构、数据库设计、开发计划
**文档完整性**: ✅ 可直接用于团队开发

**下一步**: 
1. 审阅本设计文档
2. 用户反馈和调整
3. 创建 UI 高保真设计稿
4. 启动 Phase 1 开发

